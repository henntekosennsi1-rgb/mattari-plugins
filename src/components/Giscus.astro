---
/**
 * Giscus ã‚³ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
 * GitHub Discussions ã‚’åˆ©ç”¨ã—ãŸã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½
 * 
 * ã€äº‹å‰è¨­å®šãŒå¿…è¦ã€‘
 * 1. GitHubãƒªãƒã‚¸ãƒˆãƒªã§ Discussions ã‚’æœ‰åŠ¹åŒ–
 * 2. https://giscus.app/ ã§è¨­å®šã‚’ç”Ÿæˆ
 * 3. ä¸‹è¨˜ã® repo, repoId, category, categoryId ã‚’å®Ÿéš›ã®å€¤ã«ç½®ãæ›ãˆ
 */

interface Props {
  /** ãƒšãƒ¼ã‚¸ã”ã¨ã®ãƒ¦ãƒ‹ãƒ¼ã‚¯IDï¼ˆURLãƒ‘ã‚¹ãªã©ï¼‰ */
  term?: string;
}

const { term = Astro.url.pathname } = Astro.props;

// Giscusè¨­å®šï¼ˆå®Ÿéš›ã®å€¤ã«ç½®ãæ›ãˆã¦ãã ã•ã„ï¼‰
const giscusConfig = {
  repo: 'henntaidesu/mattari-plugins',  // GitHubãƒªãƒã‚¸ãƒˆãƒª
  repoId: 'YOUR_REPO_ID',                // ãƒªãƒã‚¸ãƒˆãƒªIDï¼ˆgiscus.appã§å–å¾—ï¼‰
  category: 'Comments',                   // Discussionsã‚«ãƒ†ã‚´ãƒªå
  categoryId: 'YOUR_CATEGORY_ID',         // ã‚«ãƒ†ã‚´ãƒªIDï¼ˆgiscus.appã§å–å¾—ï¼‰
  mapping: 'pathname',                    // ãƒšãƒ¼ã‚¸ã¨Discussionã®ç´ä»˜ã‘æ–¹æ³•
  reactionsEnabled: '1',                  // ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æœ‰åŠ¹
  emitMetadata: '0',
  inputPosition: 'top',                   // ã‚³ãƒ¡ãƒ³ãƒˆå…¥åŠ›æ¬„ã®ä½ç½®
  theme: 'light',                         // ãƒ†ãƒ¼ãƒ
  lang: 'ja',                             // è¨€èª
};
---

<div class="giscus-wrapper">
  <div class="comments-header">
    <h3>ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</h3>
    <p>GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã‚³ãƒ¡ãƒ³ãƒˆã§ãã¾ã™</p>
  </div>
  
  <div class="giscus-container">
    <script
      src="https://giscus.app/client.js"
      data-repo={giscusConfig.repo}
      data-repo-id={giscusConfig.repoId}
      data-category={giscusConfig.category}
      data-category-id={giscusConfig.categoryId}
      data-mapping={giscusConfig.mapping}
      data-strict="0"
      data-reactions-enabled={giscusConfig.reactionsEnabled}
      data-emit-metadata={giscusConfig.emitMetadata}
      data-input-position={giscusConfig.inputPosition}
      data-theme={giscusConfig.theme}
      data-lang={giscusConfig.lang}
      data-loading="lazy"
      crossorigin="anonymous"
      async
    ></script>
  </div>

  <noscript>
    <div class="noscript-message">
      ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯JavaScriptã‚’æœ‰åŠ¹ã«ã—ã¦ãã ã•ã„ã€‚
    </div>
  </noscript>
</div>

<style>
  .giscus-wrapper {
    margin-top: 50px;
    padding-top: 40px;
    border-top: 2px solid #eee;
  }

  .comments-header {
    margin-bottom: 25px;
    text-align: center;
  }

  .comments-header h3 {
    font-size: 20px;
    color: #333;
    margin-bottom: 8px;
  }

  .comments-header p {
    font-size: 14px;
    color: #888;
  }

  .giscus-container {
    background: #f8f9fa;
    border-radius: 12px;
    padding: 20px;
    min-height: 200px;
  }

  /* Giscusã®ã‚¹ã‚¿ã‚¤ãƒ«ä¸Šæ›¸ã */
  .giscus-container :global(.giscus) {
    max-width: 100%;
  }

  .giscus-container :global(.giscus-frame) {
    width: 100%;
    border: none;
  }

  .noscript-message {
    padding: 20px;
    text-align: center;
    color: #666;
    background: #fff3cd;
    border-radius: 8px;
  }

  @media (max-width: 600px) {
    .giscus-wrapper {
      margin-top: 30px;
      padding-top: 30px;
    }

    .giscus-container {
      padding: 15px;
    }
  }
</style>
